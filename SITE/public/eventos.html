<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./CSS/style.css">
    <link rel="stylesheet" href="CSS/sobre.css">
    <link rel="stylesheet" href="CSS/footer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Literacia Conectada</title>
</head>
<body onload="graficoResultado()">

    <header style="background-image: url('./IMG/criancas-lendo.jpg')">  
    <!-- tags semânticas -->
        <div class="container">
            <!-- classe "container" é usada para envolver o conteúdo principal da página, ajudando a controlar o layout e a largura do conteúdo. -->
            <nav>
                <div id="tittle">
                    <h1>Literacia</h1>
                    <h1>Conectada</h1>
                </div>
                
                <ul class="linkLogin">
                    <li><a href="index.html">Início</a></li>
                    <li><a href="sobre.html">Sobre</a></li>
                    <li><a href="eventos.html">Eventos</a></li>
                    <li><a href="cadastro.html">Cadastro</a></li>
                    <li><a href="login.html" id="login-link">Já tem uma conta?</a></li>
                </ul>
            </nav>

            <section class="banner">
                <div class="banner-text">
                    <p>BEM-VINDO A PÁGINA DE USUÁRIO</p>
                    <h1>Desfrute de conteúdos exclusivos e concorra a oportunidade da sua resenha ser publicada!</h1>
                </div>
            </section>
        </div>
    </header>

<section class="SobreResenhas">
    <div class="cards" style="height:450px;">
     <h3>FUTUROS EVENTOS</h3>
     <p> Sua participação como membro é de extrema importância! Engajar-se significa contribuir para o crescimento, e no futuro, podermos alcançar inúmeras pessoas por meio de <br><span>eventos literários.</span> 
     </p> 

    </div>
</section>


<section class="sobre">
    <div class="contSobre">
        <div class="sobre-img">
            <img src="./IMG/clubeLivro.jpeg" alt="sobre">
        </div>
        
        <div class="sobre-text">
            <h3  class="h3b" >Futuros Eventos</h3>
            <p class="pMalala">Como parte dos nossos planos futuros, visamos estabelecer uma série de eventos literários envolventes para fortalecer a comunidade em torno do nosso projeto. <br> Pretendemos criar um Clube do Livro, tanto presencial quanto virtual, onde <span>os membros poderão se reunir regularmente</span>  para discutir obras selecionadas. <br> Além disso, planejamos realizar Sessões de Leitura Aberta, proporcionando um espaço para compartilhar trechos significativos de escritos pessoais ou obras favoritas.
        </div>
    </div>
</section>


<section class="valores" style="background-color: 
#404d7b;">
    <div class="contValores">
        <h3>NOS ENVIE SUA RESENHA!</h3> <br>
        <p>Enquanto esses eventos não são possíveis, tenha a oportunidade da sua resenha ser lida e publicada aqui no site! <br> Lembre-se de enviar a versão final, já que só será possivel realizar o envio uma <span>ÚNICA VEZ!</span> <br> 
             Qualquer descumprimento dos requisitos abaixo, sua resenha será anulada! <br>
            1. O formato a ser enviado é<span> PDF!</span> <br>
            2. Obrigatório ter nome e contato <br>
        
        <br> </p>

        <form id="meuFormulario" style="background-color: #b7b1aeec; padding: 30px; border-radius: 40px;">
            <label for="documento">Documento:</label>
            <input type="file" id="documento" name="documento" accept=".pdf" required>
    
            <button type="button" onclick="enviarFormulario()" id="botaoResenha">Enviar</button>
    
        </form>

</section>

<section class="valores">
    <div class="contValores">
        <h3>DICAS DE LEITURA</h3> <br>
        <p>Melhorar a experiência de leitura pode envolver vários aspectos, desde a escolha  <br> do ambiente até técnicas específicas. Aqui estão algumas dicas para ajudar <br> a aprimorar sua experiência de leitura:</p>

        <div class="valoresCard">

            <div class="unidadeCard">
                <p class="nome-valores"><strong> <span style="color: #e0650d;">Faça Anotações</span></strong></p>
                <p class="descricao">Mantenha um caderno ou use ferramentas de anotações para registrar pensamentos, insights e perguntas enquanto lê.</p>
            </div>

            <div class="unidadeCard">
                <p class="nome-valores"><strong> <span style="color: #e0650d;">Grupos de Leitura</span> </strong></p>
                <p class="descricao">Junte-se a clubes de leitura ou grupos online para discutir livros. Isso pode adicionar uma dimensão social à sua experiência de leitura.</p>
            </div>

            <div class="unidadeCard">
                <p class="nome-valores"><strong><span style="color: #e0650d;">Respeite Seu Ritmo</span></strong></p>
                <p class="descricao">Não se sinta pressionado a terminar um livro rapidamente. Cada pessoa tem seu próprio ritmo de leitura.</p>
            </div>

        </div>

    </div>
</section>


<section class="resenhas">
    <div class="container">
        <h3>RESENHAS</h3>
        <p>As resenhas a seguir são dos livros que serão abordados em eventos futuros. <br> Não esqueça de <span>VOTAR</span> no titulo que mais te interessa para ser o ganhador. <br>
        Clique <a href="servicos.html" class="linkAqui">aqui</a> para ser guiado para a seção de eventos e fique por dentro de tudo! 
        </p> 
        <div class="cardsResenhas">
            <!-- card 1 -->
            <div class="card-item" style="height: 420px;">
                <img src="./IMG/mulherxinhas.png" alt="Nome ">
                <p class="nome-User" style="padding: 5px;">MULHERZINHAS</p>
                <p class="resenha-livro">
                    As quatro irmãs vivem a sua infância e adolescência, no período em que o seu pai vai para a guerra. Enquanto o Sr. March está fora elas ficam ao cuidado da sua mãe e da empregada Ana, destacando as dificuldades financeiras e emocionais que as irmãs enfrentam.
                </p>
                <a href="https://resenhasalacarte.com.br/resenhas/mulherzinhas-louisa-may-alcott/" class="botaoCard">Ler resenha completa </a>
                
            </div>
            <!-- end card item 1 -->
            <!-- card 2 -->
            <div class="card-item" style="height: 420px;">
                <img src="./IMG/jogos-vorazes-suzanne-collins.jpg" alt="Nome ">
                <p class="nome-User">JOGOS VORAZES</p>
                <p class="resenha-livro">
                    O primeiro Livro da série de Suzanne Collins, conta a história sofrida do povo de Penem, que como castigo da revolução, eram obrigados a enviar para capital uma garota e um garoto de 12 e 18 anos de cada um dos 12 Distritos, para lutarem até a morte em uma arena. 
                </p>
                <a href="https://www.minhavidaliteraria.com.br/2011/10/11/resenha-jogos-vorazes-html/" class="botaoCard">Ler resenha completa </a>
            </div>
            <!-- end card item 2 -->
            <!-- card 3 -->
            <div class="card-item" style="height: 420px;">
                <img src="./IMG/miseraveis.jpeg" alt="NEUGIERHIme ">
                <p class="nome-User">OS MISERÁVEIS</p>
                <p class="resenha-livro">
                    Sendo um dos livros considerados uma obra-prima da literatura, ele denuncia as injustiças e as misérias humanas, narrando a trajetória de Jean Valjean, um ex-presidiário que busca redimir seus erros e ajudar os mais pobres na França do século XIX.
                </p>
                <a href="miseraveis.html" class="botaoCard">Ler resenha completa</a> 
            </div>
            <!-- end card item 3 -->
        </di+v>
    </div>
</section>



<div class="texto">
    <h1>ENQUETE DE VOTAÇÃO</h1>
    <p>Vote no livro que realmente mexeu com você para ser o destaque no próximo evento literário. <br>Participe da decisão e faça parte desse evento que celebra a diversidade de narrativas. <br> <span>Faça sua escolha!</span>  </p>
</div>

<section class="votacao">
    <div class="conteiner3">
            <!-- <form id="pollForm"> -->
                <div class="enquete" style="background-image: url(./IMG/LIVROS.png); height: 400px;">
                    <h2 class="tituloCard"> vote no livro de sua preferência </h2>
                
                      <div class='form'>
                          <input type='radio' name="pollOption" id='opcao1' value="opção 1">
                          <label for='opcao1'>Mulherzinhas</label>
                      </div>
                    
                      <div class='form'>
                          <input type='radio' name="pollOption" id='opcao2' value="opção 2">
                          <label for='opcao2'>Jogos Vorazes</label>
                      </div>
    
                      <div class='form'>
                        <input type='radio' name="pollOption" id='opcao3' value="opção 3">
                        <label for='opcao3'>Os miseráveis</label>
                    </div>
                    
                    <div class="botaoJustifique">
                        <button type="button" onclick="vote()" class="botaoEnquete">Votar</button>
                    </div>

                    <div id="result"></div>

                </div>
            <!-- </form> -->
       
            <div class="dashborad">
                <canvas id="myChart">


                </canvas>
            </div>
    </div>
</section>

<footer>
    <div id="footer_content">
        <div id="footer_contacts">
            <h1>Literacia Conectada</h1>
            <p>conectando gerações</p>

            <div id="footer_social_media">
                <a href="https://www.instagram.com/" class="footer-link" id="instagram">
                    <i class="fa-brands fa-instagram"></i>
                </a>

                <a href="https://pt-br.facebook.com/" class="footer-link" id="facebook">
                    <i class="fa-brands fa-facebook-f"></i>
                </a>
            </div>
        </div>
        
    </div>
    <div id="footer_copyright">
        &#169
        2023 by Isabela Rosa
    </div>
</footer>


</body>
</html>


<script>
    function vote() {
        var selectedOption = document.querySelector('input[name="pollOption"]:checked');
        var qnt1Var = 0
        var qnt2Var = 0
        var qnt3Var = 0

        if (selectedOption) {
            var resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'Você votou em: ' + selectedOption.value;
        } else {
            alert('Por favor, selecione uma opção antes de votar.');
        }


        if(selectedOption.value == 'opção 1' ){
            qnt1Var++;
        }else if(selectedOption.value == 'opção 2' ){
            qnt2Var++;
        }else{
            qnt3Var++;
        }

        console.log(qnt1Var, qnt2Var, qnt3Var)

        fetch("/usuarios/enqueteResultado", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          // crie um atributo que recebe o valor recuperado aqui
          // Agora vá para o arquivo routes/usuario.js
          usuarioServer:  sessionStorage.ID_USUARIO,
          qnt1Server: qnt1Var,
          qnt2Server: qnt2Var,
          qnt3Server: qnt3Var,

        }),
      })
        .then(function (resposta) {
          console.log("resposta: ", resposta);
  
          if (resposta.ok) {
            window.location.reload()
            console.log("DENTRO DO IF DO CADASTRAR")
  
  
          } else {
            throw "Houve um erro ao tentar realizar o cadastro!";
          }
        })
        .catch(function (resposta) {
          console.log(`#ERRO: ${resposta}`);
        });
  
      return false;

    }
    
function desenhoDash(vetorLivros){
        const ctx = document.getElementById('myChart');

    new Chart(ctx, {
       type: 'bar',
       data: {
           labels: ['Mulherzinhas', 'Jogos Vorazes', 'Os miseráveis'],
           datasets: [{
               label: 'RANKING',
               backgroundColor: ['#FF4500',   '#FF8C00',
               '#FFD700'] ,  
               borderColor: ['#FF4500','#FF8C00',
               '#FFD700'],      
               data: vetorLivros,   
               borderWidth: 1              
           }]
       },
       options: {
           indexAxis: 'y',
           plugins: {
               legend: {
                   labels: {
                       color: '#CFDEF1'
                   }
               }
           },
           scales: {
               x: {
                   grid: {
                       color: '#44595B'
                   },
                   ticks: {
                       color: '#CFDEF1'
                   }
                   
               },
               y: {
                   beginAtZero: true,
                   grid: {
                       color: '#44595B'
                   },
                   ticks: {
                       color: '#CFDEF1'
                   }
               }
           }
       }
   });
}
    
function graficoResultado() {
    fetch("/usuarios/dashboard", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        }
      }).then(function (resposta) {
        console.log("ESTOU NO THEN DO entrar()!")

        if (resposta.ok) {
            console.log(resposta);

            resposta.json().then(json => {
                var vetorLivros = [Number(json.livro1), Number(json.livro2),Number(json.livro3) ]
                console.log(vetorLivros );
                desenhoDash(vetorLivros)
            });

        } else {

            console.log("Houve um erro ao tentar realizar o login!");

            resposta.text().then(texto => {
                console.error(texto);
                finalizarAguardar(texto);
            });
        }

    }).catch(function (erro) {
        console.log(erro);
    })

    return false;
} 
/*  o comando fetch é usado para buscar dados de um servidor. O método then() é usado duas vezes para lidar com a promessa retornada pelo comando fetch. A primeira chamada ao método then() converte a resposta em um objeto JSON, enquanto a segunda imprime o objeto JSON no console 1. O método catch() é usado para lidar com erros que possam ocorrer durante a execução da promessa 3.*/
</script>

<script>
 function enviarFormulario() {
    // Simulação de envio do formulário

    if(documento.value == ''){

        alert('O campo não possui nenhum arquivo, selecione o arquivo correto em formato PDF!');

    }else{
     alert('Formulário enviado com sucesso!');
            
     // Desabilita o formulário após o envio
     document.getElementById('meuFormulario').style.display = 'none';

    }

}
</script>